import: https://mapzen.com/carto/refill-style/4/refill-style.yaml

sources:

    _snowtotals:
      type: TopoJSON
      url: https://apps.bostonglobe.com/metro/graphics/2016/12/snow-totals/assets/snowtotals.topojson

styles:
  custom-labels:
    base: text
    blend_order: 10

layers:

    reports:
      data: { source: _snowtotals }
      draw:
        text:
          style: custom-labels
          text_source: |
            function() {
              return feature.Amount
            }
          font:
            weight: bold
            fill: black
            stroke: { color: white, width: 4 }
            size: [[2, 0.75em], [10, 2em]]

    snowtotals:
      data: { source: _snowtotals }
      draw:

        # lines:
        #   order: 383
        #   visible: false
        #   width: 10px
        #   color: |
        #     function() {
        #       var DN = feature.DN
        #       var color =
        #         DN < 0.100 ? 'rgb(234, 255, 191)' :
        #         DN < 1     ? 'rgb(170, 255, 127)' :
        #         DN < 2     ? 'rgb(000, 205, 000)' :
        #         DN < 3     ? 'rgb(000, 139, 000)' :
        #         DN < 4     ? 'rgb(016, 078, 139)' :
        #         DN < 6     ? 'rgb(030, 144, 255)' :
        #         DN < 8     ? 'rgb(000, 178, 238)' :
        #         DN < 10    ? 'rgb(000, 238, 238)' :
        #         DN < 12    ? 'rgb(200, 104, 255)' :
        #         DN < 15    ? 'rgb(145, 044, 238)' :
        #         DN < 18    ? 'rgb(139, 000, 139)' :
        #         DN < 21    ? 'rgb(139, 000, 000)' :
        #         DN < 24    ? 'rgb(205, 000, 000)' :
        #         DN < 30    ? 'rgb(238, 064, 000)' :
        #         DN < 36    ? 'rgb(255, 127, 000)' :
        #         'rgb(255, 255, 000)';
        #       return color;
        #     }

        polygons:
          interactive: true
          order: 383
          color: |
            function() {
              var DN = feature.DN
              var color =
                DN < 0.100 ? 'rgb(220, 235, 235)' :
                DN < 1     ? 'rgb(207, 228, 230)' :
                DN < 2     ? 'rgb(186, 212, 222)' :
                DN < 3     ? 'rgb(168, 194, 215)' :
                DN < 4     ? 'rgb(150, 172, 209)' :
                DN < 6     ? 'rgb(142, 148, 203)' :
                DN < 8     ? 'rgb(138, 120, 195)' :
                DN < 10    ? 'rgb(139, 084, 181)' :
                DN < 12    ? 'rgb(133, 069, 161)' :
                DN < 15    ? 'rgb(124, 052, 133)' :
                DN < 18    ? 'rgb(111, 040, 108)' :
                DN < 21    ? 'rgb(094, 031, 082)' :
                DN < 24    ? 'rgb(074, 024, 055)' :
                DN < 30    ? 'rgb(054, 018, 034)' :
                DN < 36    ? 'rgb(039, 014, 022)' :
                'rgb(002, 001, 001)';
              return color;
            }
