import: https://mapzen.com/carto/refill-style/4/refill-style.yaml

sources:

    _snowtotals:
      type: TopoJSON
      url: https://apps.bostonglobe.com/metro/graphics/2016/12/snow-totals/assets/snowtotals.topojson

styles:
  custom-labels:
    base: text
    blend_order: 10

layers:

    reports:
      data: { source: _snowtotals }
      draw:
        text:
          buffer: [[2, 24px], [10, 4px]]
          style: custom-labels
          text_source: |
            function() {
              return feature.Amount
            }
          font:
            weight: bold
            fill: black
            stroke: { color: white, width: 4 }
            size: [[2, 0.75em], [10, 2em]]

    snowtotals:
      data: { source: _snowtotals }
      draw:

        # lines:
        #   order: 383
        #   visible: false
        #   width: 10px
        #   color: |
        #     function() {
        #       var DN = feature.DN
        #       var color =
        #         DN < 0.100 ? 'rgb(234, 255, 191)' :
        #         DN < 1     ? 'rgb(170, 255, 127)' :
        #         DN < 2     ? 'rgb(000, 205, 000)' :
        #         DN < 3     ? 'rgb(000, 139, 000)' :
        #         DN < 4     ? 'rgb(016, 078, 139)' :
        #         DN < 6     ? 'rgb(030, 144, 255)' :
        #         DN < 8     ? 'rgb(000, 178, 238)' :
        #         DN < 10    ? 'rgb(000, 238, 238)' :
        #         DN < 12    ? 'rgb(200, 104, 255)' :
        #         DN < 15    ? 'rgb(145, 044, 238)' :
        #         DN < 18    ? 'rgb(139, 000, 139)' :
        #         DN < 21    ? 'rgb(139, 000, 000)' :
        #         DN < 24    ? 'rgb(205, 000, 000)' :
        #         DN < 30    ? 'rgb(238, 064, 000)' :
        #         DN < 36    ? 'rgb(255, 127, 000)' :
        #         'rgb(255, 255, 000)';
        #       return color;
        #     }

        polygons:
          interactive: true
          order: 383
          color: |
            function() {
              var DN = feature.DN
              var color =
                DN < 0.100 ? '#e1ebf4' :
                DN < 0.500 ? '#ced9ea' :
                DN < 1.000 ? '#bdc6e1' :
                DN < 2.000 ? '#afb4d7' :
                DN < 4.000 ? '#a3a1cd' :
                DN < 6.000 ? '#998ec3' :
                DN < 8.000 ? '#917ab8' :
                DN < 11.00 ? '#8b65ad' :
                DN < 14.00 ? '#86529b' :
                DN < 17.00 ? '#7a4086' :
                DN < 20.00 ? '#6c3172' :
                DN < 24.00 ? '#5a265c' :
                DN < 28.00 ? '#471d47' :
                DN < 32.00 ? '#321531' :
                DN < 36.00 ? '#1e0f1d' :
                '#000000';
              return color;
            }
