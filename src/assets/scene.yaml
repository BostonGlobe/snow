import: https://mapzen.com/carto/refill-style/4/refill-style.yaml

sources:

    _snowtotals:
      type: TopoJSON
      url: https://apps.bostonglobe.com/metro/graphics/2016/12/snow-totals/assets/snowtotals.topojson

styles:
  custom-labels:
    base: text
    blend_order: 10

layers:

    snowtotals:
      data: { source: _snowtotals }
      draw:

        text:
          priority: |
            function() {
              return 100 / feature.DN 
            }
          buffer: [[2, 24px], [10, 36px]]
          style: custom-labels
          text_source: |
            function() {
              return feature.DN > 0.001 ? feature.DN : ''
            }
          font:
            weight: bold
            fill: black
            stroke: { color: white, width: 4 }
            size: [[2, 0.75em], [10, 1.75em]]

        polygons:
          interactive: true
          order: 383
          color: |
            function() {
              var DN = feature.DN
              var color =
                DN < 0.100 ? '#e1ebf4' :
                DN < 0.500 ? '#ced9ea' :
                DN < 1.000 ? '#bdc6e1' :
                DN < 2.000 ? '#afb4d7' :
                DN < 4.000 ? '#a3a1cd' :
                DN < 6.000 ? '#998ec3' :
                DN < 8.000 ? '#917ab8' :
                DN < 11.00 ? '#8b65ad' :
                DN < 14.00 ? '#86529b' :
                DN < 17.00 ? '#7a4086' :
                DN < 20.00 ? '#6c3172' :
                DN < 24.00 ? '#5a265c' :
                DN < 28.00 ? '#471d47' :
                DN < 32.00 ? '#321531' :
                DN < 36.00 ? '#1e0f1d' :
                '#000000';
              return color;
            }
